(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45ed1446"],{"14d9":function(t,s,e){"use strict";var a=e("23e7"),o=e("7b0b"),i=e("07fa"),l=e("3a34"),r=e("3511"),n=e("d039"),d=n((function(){return 4294967297!==[].push.call({length:4294967296},1)})),c=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},u=d||!c();a({target:"Array",proto:!0,arity:1,forced:u},{push:function(t){var s=o(this),e=i(s),a=arguments.length;r(e+a);for(var n=0;n<a;n++)s[e]=arguments[n],e++;return l(s,e),e}})},"257d":function(t,s,e){},"3a34":function(t,s,e){"use strict";var a=e("83ab"),o=e("e8b5"),i=TypeError,l=Object.getOwnPropertyDescriptor,r=a&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=r?function(t,s){if(o(t)&&!l(t,"length").writable)throw i("Cannot set read only .length");return t.length=s}:function(t,s){return t.length=s}},aac8:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content-page"},[e("div",{staticClass:"content-nav"},[e("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"order"}}},[t._v("订单管理")]),e("el-breadcrumb-item",[t._v(t._s(t.infoForm.order_sn?"订单详情":"添加订单"))])],1),e("div",{staticClass:"operation-nav"},[e("el-button",{attrs:{type:"primary",size:"small",icon:"arrow-left"},on:{click:t.goBackPage}},[t._v("返回列表")])],1)],1),e("div",{staticClass:"order-status-text"},[e("label",[t._v(t._s(t.infoForm.order_status_text))]),e("div",[e("el-button",{attrs:{type:"danger",plain:""},on:{click:t.changeStatus}},[t._v("变更状态")])],1)]),e("div",{staticClass:"content-main"},[e("div",{staticClass:"form-table-box"},[e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(s){t.activeName=s},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"订单信息",name:"first"}},[e("div",{staticClass:"content-title marginTop"},[t._v("买家信息：")]),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.addressData,border:"",stripe:""}},[e("el-table-column",{attrs:{prop:"user_id",label:"用户id",width:"70"}}),e("el-table-column",{attrs:{prop:"nickname",label:"昵称",width:"100"}}),e("el-table-column",{attrs:{prop:"avatar",label:"头像",width:"80"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("img",{staticStyle:{width:"60px",height:"60px"},attrs:{src:t.row.avatar,alt:""}})]}}])}),e("el-table-column",{attrs:{prop:"name",label:"客户名",width:"100"}}),e("el-table-column",{attrs:{prop:"mobile",label:"客户手机",width:"120"}}),e("el-table-column",{attrs:{prop:"address",label:"客户地址"}}),e("el-table-column",{attrs:{prop:"postscript",label:"买家备注",width:"300"}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.addressEdit(s.$index,s.row)}}},[t._v("编辑 ")])]}}])})],1),e("div",{staticClass:"content-title marginTop"},[t._v("货物信息：")]),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.infoForm.goodsList,border:"",stripe:""}},[e("el-table-column",{attrs:{prop:"goods_sn",label:"商品SKU",width:"120"}}),e("el-table-column",{attrs:{prop:"list_pic_url",label:"商品图",width:"120"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("img",{staticStyle:{width:"60px",height:"60px"},attrs:{src:t.row.list_pic_url,alt:""}})]}}])},[t._v("list_pic_url ")]),e("el-table-column",{attrs:{prop:"goods_name",label:"商品名"}}),e("el-table-column",{attrs:{prop:"goods_specifition_name_value",label:"型号",width:"100"}}),e("el-table-column",{attrs:{prop:"retail_price",label:"售价",width:"100"}}),e("el-table-column",{attrs:{prop:"number",label:"购买数量",width:"100"}}),e("el-table-column",{attrs:{label:"小计",width:"100"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("label",[t._v(t._s(s.row.retail_price*s.row.number))])]}}])}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.goodsListEdit(s.$index,s.row)}}},[t._v("编辑 ")]),e("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){return t.handleRowDelete(s.$index,s.row)}}},[t._v("删除 ")])]}}])})],1),e("div",{staticClass:"detail-wrap"},[e("div",{staticClass:"total-price"},[t._v(" 优惠：¥"+t._s(t.infoForm.promotions_price)+" ")]),e("div",{staticClass:"total-price"},[t._v(" 合计：¥"+t._s(t.infoForm.actual_price)+"（含运费：¥"+t._s(t.infoForm.freight_price)+"） ")]),e("div",{staticClass:"total-price"},[t._v(" 改价前：¥"+t._s(t.infoForm.change_price)+"（含运费：¥"+t._s(t.infoForm.freight_price)+"） ")]),e("div",{staticClass:"total-price"},[t._v(" "+t._s(t.infoForm.change_price-t.infoForm.actual_price>0?"优惠金额："+(t.infoForm.change_price-t.infoForm.actual_price).toFixed(2):"涨价金额："+(t.infoForm.actual_price-t.infoForm.change_price).toFixed(2))+" ")])]),e("div",{staticClass:"memo-wrap"},[e("div",{staticClass:"content-title"},[t._v("卖家备注：")]),e("el-input",{staticClass:"memo-input",attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:t.infoForm.admin_memo,callback:function(s){t.$set(t.infoForm,"admin_memo",s)},expression:"infoForm.admin_memo"}}),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveAdminMemo}},[t._v("保存 ")])],1),e("div",{staticClass:"footer"},[e("div",{staticClass:"item"},[e("div",{staticClass:"t"},[t._v("订单ID：")]),e("div",{staticClass:"c"},[t._v(t._s(t.infoForm.id))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"t"},[t._v("订单号：")]),e("div",{staticClass:"c"},[t._v(t._s(t.infoForm.order_sn))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"t"},[t._v("加入时间：")]),e("div",{staticClass:"c"},[t._v(t._s(t.infoForm.add_time))])]),t.infoForm.pay_time?e("div",{staticClass:"item"},[e("div",{staticClass:"t"},[t._v("付款时间：")]),e("div",{staticClass:"c"},[t._v(t._s(t.infoForm.pay_time))])]):t._e(),t.infoForm.shipping_time?e("div",{staticClass:"item"},[e("div",{staticClass:"t"},[t._v("发货时间：")]),e("div",{staticClass:"c"},[t._v(t._s(t.infoForm.shipping_time))])]):t._e(),t.infoForm.confirm_time?e("div",{staticClass:"item"},[e("div",{staticClass:"t"},[t._v("确认时间：")]),e("div",{staticClass:"c"},[t._v(t._s(t.infoForm.confirm_time))])]):t._e(),t.infoForm.dealdone_time?e("div",{staticClass:"item"},[e("div",{staticClass:"t"},[t._v("完成时间：")]),e("div",{staticClass:"c"},[t._v(t._s(t.infoForm.dealdone_time))])]):t._e()])],1),e("el-tab-pane",{attrs:{label:"物流信息",name:"second"}},[""==t.expressData.logistic_code?e("div",{staticClass:"no-traces"},[t._v(" 暂无物流信息 ")]):e("div",{staticClass:"has-traces"},[e("p",[e("label",[t._v("快递公司：")]),e("span",[t._v(t._s(t.expressData.shipper_name))])]),e("p",[e("label",[t._v("快递单号：")]),e("span",[t._v(t._s(t.expressData.logistic_code))])]),e("p",[e("label",[t._v("快递轨迹：")])]),1==t.on_posting?e("div",{staticClass:"posting"},[t._v(" 正在查询，请稍候... ")]):t._e(),e("ul",{staticClass:"traces-wrap"},t._l(t.expressData.traces,(function(s){return e("li",{staticClass:"traces-list"},[e("div",{staticClass:"traces-time"},[t._v(t._s(s.time))]),e("div",{staticClass:"traces-content"},[t._v(t._s(s.status))])])})),0)])])],1)],1)]),e("el-dialog",{attrs:{title:"修改地址",visible:t.dialogAddressVisible},on:{"update:visible":function(s){t.dialogAddressVisible=s}}},[e("el-form",{attrs:{model:t.nowAddressData}},[e("el-form-item",{attrs:{label:"所在地区:","label-width":"120px"}},[e("el-cascader",{attrs:{options:t.options,placeholder:"请选择"},model:{value:t.addOptions,callback:function(s){t.addOptions=s},expression:"addOptions"}})],1),e("el-form-item",{attrs:{label:"详细地址:","label-width":"120px"}},[e("el-input",{staticClass:"el-input",attrs:{"auto-complete":"off",placeholder:"请输入详细地"},model:{value:t.nowAddressData.cAddress,callback:function(s){t.$set(t.nowAddressData,"cAddress",s)},expression:"nowAddressData.cAddress"}})],1),e("el-form-item",{attrs:{label:"收货人:","label-width":"120px"}},[e("el-input",{staticClass:"el-input",attrs:{"auto-complete":"off",placeholder:"请输入收货人"},model:{value:t.nowAddressData.name,callback:function(s){t.$set(t.nowAddressData,"name",s)},expression:"nowAddressData.name"}})],1),e("el-form-item",{attrs:{label:"手机:","label-width":"120px"}},[e("el-input",{staticClass:"el-input",attrs:{"auto-complete":"off",placeholder:"请输入收货人手机"},model:{value:t.nowAddressData.mobile,callback:function(s){t.$set(t.nowAddressData,"mobile",s)},expression:"nowAddressData.mobile"}})],1),e("el-form-item",{attrs:{label:"留言:","label-width":"120px"}},[e("el-input",{staticClass:"el-input",attrs:{"auto-complete":"off",placeholder:"",disabled:!0},model:{value:t.nowAddressData.postscript,callback:function(s){t.$set(t.nowAddressData,"postscript",s)},expression:"nowAddressData.postscript"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(s){t.dialogAddressVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.saveAddress}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{title:"修改商品",visible:t.dialogGoodsListVisible},on:{"update:visible":function(s){t.dialogGoodsListVisible=s}}},[e("el-form",{attrs:{model:t.goodsData}},[e("el-form-item",{attrs:{label:"id:","label-width":"120px"}},[e("label",[t._v(t._s(t.goodsData.goods_id))])]),e("el-form-item",{attrs:{label:"商品图:","label-width":"120px"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("img",{staticStyle:{width:"60px",height:"60px"},attrs:{src:t.goodsData.list_pic_url,alt:""}})]}}])}),e("el-form-item",{attrs:{label:"商品名:","label-width":"120px"}},[e("label",[t._v(t._s(t.goodsData.goods_name))])]),e("el-form-item",{attrs:{label:"商品型号:","label-width":"120px"}},[e("label",[t._v(t._s(t.goodsData.goods_specifition_name_value))])]),e("el-form-item",{attrs:{label:"售价:","label-width":"120px"}},[e("label",[t._v(t._s(t.goodsData.retail_price))])]),e("el-form-item",{attrs:{label:"购买数量:","label-width":"120px"}},[e("el-input-number",{attrs:{min:1,label:"购买的数量"},model:{value:t.goodsData.number,callback:function(s){t.$set(t.goodsData,"number",s)},expression:"goodsData.number"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(s){t.dialogGoodsListVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.saveGoodsList}},[t._v("保存并返回")])],1)],1),e("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(s){t.dialogVisible=s}}},[e("span",[t._v("确定打包备货")]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(s){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.PackageConfirm}},[t._v("确 定")])],1)]),e("el-dialog",{attrs:{title:"变更状态",visible:t.statusVisible,width:"30%"},on:{"update:visible":function(s){t.statusVisible=s}}},[e("el-form",{attrs:{model:t.statusData}},[e("el-form-item",{attrs:{label:"状态:","label-width":"120px"}},[e("el-select",{staticClass:"el-select-class",attrs:{placeholder:"选择状态"},model:{value:t.statusValue,callback:function(s){t.statusValue=s},expression:"statusValue"}},t._l(t.statusList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(s){t.statusVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.statusConfirm}},[t._v("确 定")])],1)],1)],1)},o=[],i=(e("14d9"),e("d188")),l={data:function(){return{statusList:[{value:"101",label:"待付款"},{value:"102",label:"交易关闭"},{value:"300",label:"待发货"},{value:"301",label:"已发货"},{value:"401",label:"交易成功"}],statusVisible:!1,statusValue:"",statusData:{},activeName:"first",dialogVisible:!1,dialogAddressVisible:!1,dialogGoodsListVisible:!1,addressData:[],infoForm:{order_sn:0},infoRules:{user_id:[{required:!0,message:"请输入名称",trigger:"blur"}],order_sn:[{required:!0,message:"请输入简介",trigger:"blur"}],order_status:[{required:!0,message:"请选择商品图片",trigger:"blur"}]},options:[],addOptions:[],nowAddressData:{},goodsData:{},oldGoodsNumber:0,expressData:{},is_finish:0,on_posting:0}},methods:{changeStatus:function(){this.statusVisible=!0},statusConfirm:function(){var t=this;this.axios.post("order/changeStatus",{status:this.statusValue,orderSn:this.infoForm.order_sn}).then((function(s){t.getInfo(),t.statusVisible=!1}))},handleClick:function(t,s){var e=this,a=t._data.index;1==a&&0==this.is_finish&&(this.on_posting=1,this.axios.post("order/getOrderExpress",{orderId:this.infoForm.id}).then((function(t){e.expressData=t.data.data,e.expressData.traces=JSON.parse(e.expressData.traces),e.is_finish=t.data.data.is_finish,e.on_posting=0})))},PackageConfirm:function(){var t=this;this.axios.get("order/orderpack",{params:{orderSn:this.infoForm.order_sn}}).then((function(s){t.dialogVisible=!1,t.addressData=[],t.getInfo()}))},goPackage:function(){this.dialogVisible=!0},test:function(){console.log(this.addressData),console.log(this.infoForm)},handleRowDelete:function(t,s){var e=this;this.goodsData=s,this.goodsData.order_id=this.infoForm.id,this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.axios.post("order/goodsListDelete",e.goodsData).then((function(t){0===t.data.errno&&(e.$message({type:"success",message:"删除成功!"}),e.$router.go(-1))}))})).catch((function(){}))},saveGoodsList:function(){var t=this;this.goodsData.order_id=this.infoForm.id;var s=this.oldGoodsNumber,e=this.goodsData.number;if(console.log(s),console.log(e),s!=e){var a=0,o=0;s>e?a=s-e:(a=e-s,o=1),this.goodsData.number=a,this.goodsData.addOrMinus=o,this.axios.post("order/saveGoodsList",this.goodsData).then((function(s){t.$router.go(-1)}))}else this.dialogGoodsListVisible=!1},saveAdminMemo:function(){var t=this;this.axios.post("order/saveAdminMemo",{text:this.infoForm.admin_memo,id:this.infoForm.id}).then((function(s){console.log("++---------------------------++"),console.log(s),console.log("++---------------------------++"),0===s.data.errno?t.$message({type:"success",message:"保存成功!"}):t.$message({type:"error",message:"保存失败"})}))},saveAddress:function(){var t=this;this.nowAddressData.order_sn=this.infoForm.order_sn,this.nowAddressData.addOptions=this.addOptions,this.axios.post("order/saveAddress",this.nowAddressData).then((function(s){console.log("++---------------------------++"),console.log(s),console.log("++---------------------------++"),0===s.data.errno?(t.$message({type:"success",message:"修改成功!"}),t.addressData=[],t.getInfo(),t.dialogAddressVisible=!1):t.$message({type:"error",message:"修改失败"})}))},onSubmitInfo:function(){},goBackPage:function(){this.$router.go(-1)},addressEdit:function(){this.dialogAddressVisible=!0},goodsListEdit:function(t,s){console.log(s),this.goodsData=s,this.oldGoodsNumber=s.number,this.dialogGoodsListVisible=!0},getAllRegion:function(){var t=this;this.axios.get("order/getAllRegion").then((function(s){t.options=s.data.data}))},getInfo:function(){var t=this;if(this.infoForm.id<=0)return!1;this.axios.get("order/detail",{params:{orderId:this.infoForm.id}}).then((function(s){console.log("++---------------------------++"),console.log(s.data.data),console.log("++---------------------------++"),t.infoForm=s.data.data.orderInfo;var e={user_id:t.infoForm.user_id,name:t.infoForm.consignee,nickname:t.infoForm.user_name,avatar:t.infoForm.avatar,mobile:t.infoForm.mobile,postscript:t.infoForm.postscript,address:t.infoForm.full_region+t.infoForm.address,cAddress:t.infoForm.address};t.addressData=[],t.addressData.push(e),t.nowAddressData=e,t.addOptions.push(t.infoForm.province,t.infoForm.city,t.infoForm.district),console.log(t.infoForm)}))}},components:{ElButton:i["a"]},mounted:function(){this.infoForm.id=this.$route.query.id||0,this.getInfo(),this.getAllRegion()}},r=l,n=(e("dd1f"),e("2877")),d=Object(n["a"])(r,a,o,!1,null,"04e82433",null);s["default"]=d.exports},dd1f:function(t,s,e){"use strict";e("257d")}}]);