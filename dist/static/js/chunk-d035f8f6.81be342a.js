(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d035f8f6"],{"14d9":function(t,e,a){"use strict";var s=a("23e7"),n=a("7b0b"),o=a("07fa"),i=a("3a34"),r=a("3511"),l=a("d039"),c=l((function(){return 4294967297!==[].push.call({length:4294967296},1)})),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},d=c||!u();s({target:"Array",proto:!0,arity:1,forced:d},{push:function(t){var e=n(this),a=o(e),s=arguments.length;r(a+s);for(var l=0;l<s;l++)e[a]=arguments[l],a++;return i(e,a),a}})},"3a34":function(t,e,a){"use strict";var s=a("83ab"),n=a("e8b5"),o=TypeError,i=Object.getOwnPropertyDescriptor,r=s&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=r?function(t,e){if(n(t)&&!i(t,"length").writable)throw o("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},"5f72":function(t,e,a){},a718:function(t,e,a){"use strict";a("5f72")},e692:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-page"},[a("div",{staticClass:"content-nav"},[a("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[a("el-breadcrumb-item",[t._v("商品列表")])],1),a("div",{staticClass:"operation-nav"},[a("router-link",{attrs:{to:"/dashboard/goods/add"}},[a("el-button",{attrs:{type:"primary",icon:"plus",size:"small"}},[t._v("添加商品")])],1)],1)],1),a("div",{staticClass:"content-main"},[a("div",{staticClass:"block"},[a("span",{staticClass:"wrapper"},[a("el-button",{class:1==t.activeClass?"active":"",attrs:{plain:!0,type:"primary",size:"small"},on:{click:function(e){return t.sortOrder(1)}}},[t._v("按销量排序")]),a("el-button",{class:2==t.activeClass?"active":"",attrs:{plain:!0,type:"primary",size:"small"},on:{click:function(e){return t.sortOrder(2)}}},[t._v("按售价排序")]),a("el-button",{class:3==t.activeClass?"active":"",attrs:{plain:!0,type:"primary",size:"small"},on:{click:function(e){return t.sortOrder(3)}}},[t._v("按库存排序")])],1)]),a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"全部商品",name:"first"}}),a("el-tab-pane",{attrs:{label:"出售中",name:"second"}}),a("el-tab-pane",{attrs:{label:"已售完",name:"third"}}),a("el-tab-pane",{attrs:{label:"已下架",name:"fourth"}})],1),a("div",{staticClass:"filter-box"},[a("el-form",{staticClass:"form-inline",attrs:{inline:!0,model:t.filterForm}},[a("el-form-item",{attrs:{label:"商品名称"}},[a("el-input",{attrs:{size:"small",placeholder:"商品名称"},model:{value:t.filterForm.name,callback:function(e){t.$set(t.filterForm,"name",e)},expression:"filterForm.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onSubmitFilter}},[t._v("查询")]),a("el-button",{attrs:{size:"small"},on:{click:t.clear}},[t._v("清空")])],1)],1)],1),a("div",{staticClass:"form-table-box"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.row.product,stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"60"}}),a("el-table-column",{attrs:{prop:"goods_sn",label:"商品SKU",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"商品SKU"},on:{blur:function(a){return t.checkSkuOnly(e.$index,e.row)}},model:{value:e.row.goods_sn,callback:function(a){t.$set(e.row,"goods_sn",a)},expression:"scope.row.goods_sn"}})]}}],null,!0)}),a("el-table-column",{attrs:{prop:"goods_aka",label:"快递单上的简称",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"简称"},model:{value:e.row.goods_name,callback:function(a){t.$set(e.row,"goods_name",a)},expression:"scope.row.goods_name"}})]}}],null,!0)}),a("el-table-column",{attrs:{prop:"value",label:"型号/规格",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"如1斤/条"},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})]}}],null,!0)}),a("el-table-column",{attrs:{prop:"cost",label:"成本(元)",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"成本"},model:{value:e.row.cost,callback:function(a){t.$set(e.row,"cost",a)},expression:"scope.row.cost"}})]}}],null,!0)}),a("el-table-column",{attrs:{prop:"retail_price",label:"零售(元)",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"零售"},model:{value:e.row.retail_price,callback:function(a){t.$set(e.row,"retail_price",a)},expression:"scope.row.retail_price"}})]}}],null,!0)}),a("el-table-column",{attrs:{prop:"goods_weight",label:"重量(KG)",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"重量"},model:{value:e.row.goods_weight,callback:function(a){t.$set(e.row,"goods_weight",a)},expression:"scope.row.goods_weight"}})]}}],null,!0)}),a("el-table-column",{attrs:{prop:"goods_number",label:"库存",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"库存"},model:{value:e.row.goods_number,callback:function(a){t.$set(e.row,"goods_number",a)},expression:"scope.row.goods_number"}})]}}],null,!0)}),a("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-check",circle:""},on:{click:function(a){return t.specSave(e.$index,e.row)}}}),a("el-switch",{attrs:{size:"mini","active-text":"","inactive-text":"","active-value":"1","inactive-value":"0"},on:{change:function(a){return t.changeProductStatus(a,e.row.id)}},model:{value:e.row.is_on_sale,callback:function(a){t.$set(e.row,"is_on_sale",a)},expression:"scope.row.is_on_sale"}})]}}],null,!0)})],1)]}}])}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"120"}}),a("el-table-column",{attrs:{prop:"list_pic_url",label:"商品图片",width:"80"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"40px",height:"40px"},attrs:{src:t.row.list_pic_url,alt:""}})]}}])}),a("el-table-column",{attrs:{prop:"name",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"sort_order",label:"排序",width:"140",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{staticClass:"sort-width",attrs:{size:"mini",min:1,max:100,"controls-position":"right",placeholder:"排序"},on:{blur:function(a){return t.submitSort(e.$index,e.row)},change:function(a){return t.submitSort(e.$index,e.row)}},model:{value:e.row.sort_order,callback:function(a){t.$set(e.row,"sort_order",a)},expression:"scope.row.sort_order"}})]}}])}),a("el-table-column",{attrs:{prop:"sell_volume",label:"销量",width:"80",sortable:""}}),a("el-table-column",{attrs:{prop:"goods_number",label:"库存",width:"80",sortable:""}}),a("el-table-column",{attrs:{label:"首页显示",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(a){return t.changeShowStatus(a,e.row.id)}},model:{value:e.row.is_index,callback:function(a){t.$set(e.row,"is_index",a)},expression:"scope.row.is_index"}})]}}])}),a("el-table-column",{attrs:{label:"上架",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(a){return t.changeStatus(a,e.row.id)}},model:{value:e.row.is_on_sale,callback:function(a){t.$set(e.row,"is_on_sale",a)},expression:"scope.row.is_on_sale"}})]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){return t.handleRowEdit(e.$index,e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"small",plain:"",type:"danger"},on:{click:function(a){return t.handleRowDelete(e.$index,e.row)}}},[t._v("删除 ")])]}}])})],1)],1),a("div",{staticClass:"page-box"},[a("el-pagination",{attrs:{"current-page":t.page,"page-size":t.size,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handlePageChange}})],1)],1)])},n=[],o=(a("14d9"),a("b0c0"),{data:function(){return{page:1,size:10,total:0,filterForm:{name:""},tableData:[],activeName:"second",pIndex:0,num:0,activeClass:0,expand:!0,tableDa:[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}]}},methods:{stockSyc:function(){var t=this;this.$confirm("确定要同步库存?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.axios.post("crontab/updateStockByHand").then((function(e){0===e.data.errno&&(t.$message({type:"success",message:"同步成功"}),t.getOnSaleList())}))})).catch((function(){}))},updateGoodsNumber:function(){var t=this;this.axios.post("goods/updateGoodsNumber").then((function(e){0===e.data.errno&&t.$message({type:"success",message:"同步成功2/2，完成"})}))},specSave:function(t,e){var a=this;if(""==e.goods_name||""==e.value||""==e.cost||""==e.retail_price||""==e.goods_weight)return this.$message({type:"error",message:"值不能为空!"}),!1;this.axios.post("goods/updatePrice",e).then((function(t){0===t.data.errno?a.$message({type:"success",message:"修改成功!"}):100===t.data.errno&&a.$message({type:"error",message:t.data.errmsg})}))},checkSkuOnly:function(t,e){var a=this;if(console.log(t),console.log(e),""==e.goods_sn)return this.$message({type:"error",message:"SKU不能为空"}),!1;this.axios.post("goods/checkSku",{info:e}).then((function(t){100===t.data.errno?a.$message({type:"error",message:"该SKU已存在！"}):a.$message({type:"success",message:"该SKU可以用！"})}))},expandToggle:function(){this.expand=!this.expand},test:function(){console.log(this.tableData)},submitName:function(t,e){var a=this;this.axios.post("goods/updateShortName",{id:e.id,short_name:e.short_name}).then((function(t){0===t.data.errno&&a.$message({type:"success",message:"修改成功!"})}))},submitSort:function(t,e){this.axios.post("goods/updateSort",{id:e.id,sort:e.sort_order}).then((function(t){}))},handleClick:function(t,e){var a=t._data.index;this.page=1,this.activeClass=0,0==a?(this.getList(),this.pIndex=0):1==a?(this.getOnSaleList(),this.pIndex=1):2==a?(this.getOutList(),this.pIndex=2):3==a&&(this.getDropList(),this.pIndex=3)},handlePageChange:function(t){this.page=t;var e=this.pIndex;0==e?this.getList():1==e?this.getOnSaleList():2==e?this.getOutList():3==e?this.getDropList():4==e&&this.sortOrder(this.num)},handleRowEdit:function(t,e){this.$router.push({name:"goods_add",query:{id:e.id}})},handleRowDelete:function(t,e){var a=this;this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=a;t.axios.post("goods/destory",{id:e.id}).then((function(e){if(0===e.data.errno){t.$message({type:"success",message:"删除成功!"});var a=localStorage.getItem("pIndex");console.log(a),0==a?t.getList():1==a?t.getOnSaleList():2==a?t.getOutList():3==a&&t.getDropList()}}))})).catch((function(){}))},onSubmitFilter:function(){this.page=1,this.getList()},clear:function(){var t=this;this.axios.get("goods",{params:{page:this.page,name:""}}).then((function(e){t.tableData=e.data.data.data,t.page=e.data.data.currentPage,t.total=e.data.data.count}))},getList:function(){var t=this;this.axios.get("goods",{params:{page:this.page,size:this.size,name:this.filterForm.name}}).then((function(e){t.tableData=e.data.data.data,t.page=e.data.data.currentPage,t.total=e.data.data.count}))},getOnSaleList:function(){var t=this;this.axios.get("goods/onsale",{params:{page:this.page,size:this.size}}).then((function(e){t.tableData=e.data.data.data,t.page=e.data.data.currentPage,t.total=e.data.data.count}))},getOutList:function(){var t=this;this.axios.get("goods/out",{params:{page:this.page,size:this.size}}).then((function(e){t.tableData=e.data.data.data,t.page=e.data.data.currentPage,t.total=e.data.data.count}))},getDropList:function(){var t=this;this.axios.get("goods/drop",{params:{page:this.page,size:this.size}}).then((function(e){t.tableData=e.data.data.data,t.page=e.data.data.currentPage,t.total=e.data.data.count}))},sortOrder:function(t){var e=this;this.num=t,this.pIndex=4,this.activeClass=t,this.axios.get("goods/sort",{params:{page:this.page,size:this.size,index:t}}).then((function(t){e.tableData=t.data.data.data,e.page=t.data.data.currentPage,e.total=t.data.data.count}))},changeStatus:function(t,e){this.axios.get("goods/saleStatus",{params:{status:t,id:e}}).then((function(t){}))},changeProductStatus:function(t,e){this.axios.get("goods/productStatus",{params:{status:t,id:e}}).then((function(t){}))},changeShowStatus:function(t,e){this.axios.get("goods/indexShowStatus",{params:{status:t,id:e}}).then((function(t){}))}},components:{},mounted:function(){this.getOnSaleList()}}),i=o,r=(a("a718"),a("2877")),l=Object(r["a"])(i,s,n,!1,null,"0a261040",null);e["default"]=l.exports}}]);