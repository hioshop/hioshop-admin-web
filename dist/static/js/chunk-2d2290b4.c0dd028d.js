(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2290b4"],{dc87:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-page"},[a("div",{staticClass:"content-nav"},[a("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[a("el-breadcrumb-item",[t._v("公告管理")])],1),a("div",{staticClass:"operation-nav"},[a("div",{staticStyle:{"margin-left":"10px"}}),a("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.addNotice}},[t._v("添加公告")])],1)],1),a("div",{staticClass:"content-main"},[a("div",{staticClass:"form-table-box"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"60"}}),a("el-table-column",{attrs:{prop:"content",label:"内容"}}),a("el-table-column",{attrs:{prop:"end_time",label:"结束时间",width:"180"}}),a("el-table-column",{attrs:{prop:"enabled",label:"状态",width:"110px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(0==e.row.is_delete?"启用中":"已到期下线")+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"220px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){return t.handleRowEdit(e.$index,e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{plain:"",size:"small",type:"danger"},on:{click:function(a){return t.handleRowDelete(e.$index,e.row)}}},[t._v("删除 ")])]}}])})],1)],1)]),a("el-dialog",{attrs:{title:t.is_add?"添加":"编辑",visible:t.dialog},on:{"update:visible":function(e){t.dialog=e}}},[a("el-form",{attrs:{model:t.noticeData}},[a("el-form-item",{attrs:{label:"内容:","label-width":"120px"}},[a("el-input",{staticClass:"el-input",attrs:{"auto-complete":"off",placeholder:"请输入内容"},model:{value:t.noticeData.content,callback:function(e){t.$set(t.noticeData,"content",e)},expression:"noticeData.content"}})],1),a("el-form-item",{attrs:{label:"到期时间:","label-width":"120px"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"23:59:59"},model:{value:t.noticeData.time,callback:function(e){t.$set(t.noticeData,"time",e)},expression:"noticeData.time"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialog=!1}}},[t._v("取 消")]),t.is_add?a("el-button",{attrs:{type:"primary"},on:{click:t.goNotice}},[t._v("确定添加")]):t._e(),t.is_add?t._e():a("el-button",{attrs:{type:"primary"},on:{click:t.updateNotice}},[t._v("确定修改")])],1)],1)],1)},o=[],n={data:function(){return{tableData:[],noticeData:{time:"",content:""},dialog:!1,is_add:!1}},methods:{test:function(){console.log(this.noticeData)},updateNotice:function(){var t=this;return console.log(this.noticeData),""==this.noticeData.content?(this.$message({type:"error",message:"内容不能为空"}),!1):null==this.noticeData.time?(this.$message({type:"error",message:"过期时间不能为空"}),!1):(this.axios.post("notice/update",this.noticeData).then((function(e){0===e.data.errno?(t.$message({type:"success",message:"添加成功!"}),t.getList()):t.$message({type:"error",message:"添加失败"})})),void(this.dialog=!1))},goNotice:function(){var t=this;return console.log(this.noticeData),""==this.noticeData.content?(this.$message({type:"error",message:"内容不能为空"}),!1):null==this.noticeData.time?(this.$message({type:"error",message:"过期时间不能为空"}),!1):(this.axios.post("notice/add",this.noticeData).then((function(e){0===e.data.errno?(t.$message({type:"success",message:"添加成功!"}),t.getList()):t.$message({type:"error",message:"添加失败"})})),void(this.dialog=!1))},addNotice:function(){this.dialog=!0,this.is_add=!0},handleRowEdit:function(t,e){this.noticeData.time=e.end_time,this.noticeData.content=e.content,this.noticeData.id=e.id,this.dialog=!0,this.is_add=!1},submitContent:function(t,e){this.axios.post("notice/updateContent",{id:e.id,content:e.content}).then((function(t){}))},handleRowDelete:function(t,e){var a=this;this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.axios.post("notice/destory",{id:e.id}).then((function(t){console.log(t.data),0===t.data.errno&&(a.$message({type:"success",message:"删除成功!"}),a.getList())}))}))},getList:function(){var t=this;this.axios.get("notice").then((function(e){t.tableData=e.data.data}))}},components:{},mounted:function(){this.getList()}},s=n,l=a("2877"),c=Object(l["a"])(s,i,o,!1,null,"53f93f02",null);e["default"]=c.exports}}]);