(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28ca22d3"],{3614:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"content-page"},[o("div",{staticClass:"content-nav"},[o("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[o("el-breadcrumb-item",{attrs:{to:{name:"nature"}}},[e._v("商品设置")]),o("el-breadcrumb-item",[e._v(e._s(e.infoForm.id?"编辑型号":"添加型号"))])],1),o("div",{staticClass:"operation-nav"},[o("el-button",{attrs:{type:"primary",icon:"arrow-left"},on:{click:e.goBackPage}},[e._v("返回列表")])],1)],1),o("div",{staticClass:"content-main"},[o("div",{staticClass:"form-table-box"},[o("el-form",{ref:"infoForm",attrs:{rules:e.infoRules,model:e.infoForm,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"分类名称",prop:"name"}},[o("el-input",{model:{value:e.infoForm.name,callback:function(t){e.$set(e.infoForm,"name",t)},expression:"infoForm.name"}})],1),o("el-form-item",{attrs:{label:"排序"}},[o("el-input-number",{attrs:{min:1,max:1e3},model:{value:e.infoForm.sort_order,callback:function(t){e.$set(e.infoForm,"sort_order",t)},expression:"infoForm.sort_order"}})],1),o("el-form-item",[e.infoForm.id>0?o("el-button",{attrs:{type:"primary"},on:{click:e.updateSpec}},[e._v("确定保存")]):o("el-button",{attrs:{type:"primary"},on:{click:e.addSpec}},[e._v("确定添加")]),e.infoForm.id>0?o("el-button",{attrs:{type:"danger"},on:{click:e.specDelete}},[e._v("删除")]):e._e(),o("el-button",{on:{click:e.goBackPage}},[e._v("取消")])],1)],1)],1)])])},n=[],r=(o("b0c0"),o("a3be"),{data:function(){return{infoForm:{id:0,name:"",sort_order:1},infoRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}},methods:{addSpec:function(){var e=this,t={name:this.infoForm.name,sort_order:this.infoForm.sort_order};this.$refs["infoForm"].validate((function(o){if(!o)return!1;e.axios.post("specification/add",t).then((function(t){0===t.data.errno?(e.$message({type:"success",message:"添加成功!"}),e.$router.go(-1)):e.$message({type:"error",message:"添加失败"})}))}))},updateSpec:function(){var e=this,t={id:this.infoForm.id,name:this.infoForm.name,sort_order:this.infoForm.sort_order};this.$refs["infoForm"].validate((function(o){if(!o)return!1;e.axios.post("specification/update",t).then((function(t){0===t.data.errno?(e.$message({type:"success",message:"保存成功!"}),e.$router.go(-1)):e.$message({type:"error",message:"保存失败"})}))}))},specDelete:function(e,t){var o=this;this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o.axios.post("specification/delete",{id:t.id}).then((function(e){console.log(e.data),0===e.data.errno?(o.$message({type:"success",message:"删除成功!"}),o.$router.go(-1)):o.$message({type:"error",message:"删除失败，该型号下有商品!"})}))}))},goBackPage:function(){this.$router.go(-1)},getInfo:function(){if(console.log(this.infoForm.id),console.log(this.infoForm.id),console.log(this.infoForm.id),this.infoForm.id<=0)return!1;var e=this;this.axios.post("specification/detail",{id:e.infoForm.id}).then((function(t){var o=t.data.data;console.log(o),e.infoForm=o}))}},components:{},mounted:function(){this.infoForm.id=this.$route.query.id||0,this.getInfo()}}),s=r,a=(o("4657"),o("2877")),c=Object(a["a"])(s,i,n,!1,null,"83cba312",null);t["default"]=c.exports},4657:function(e,t,o){"use strict";o("e328")},e328:function(e,t,o){}}]);